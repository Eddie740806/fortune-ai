/**
 * 十神知識庫
 * 十神代表六親、性格傾向、人生課題
 */

export interface ShiShenKnowledge {
  name: string;
  alias: string[];          // 別名
  represent: string[];      // 代表人事物
  character: string[];      // 性格傾向
  positive: string[];       // 正面特質
  negative: string[];       // 負面特質
  career: string[];         // 事業傾向
  inPalace: Record<string, string>;  // 在不同柱的含義
}

export const SHISHEN_KNOWLEDGE: Record<string, ShiShenKnowledge> = {
  '比肩': {
    name: '比肩',
    alias: ['比', '兄弟'],
    represent: [
      '同性兄弟姐妹',
      '朋友、同事、競爭對手',
      '合夥人、同輩',
      '自我意識、獨立性',
    ],
    character: [
      '獨立自主，不喜歡依賴他人',
      '有主見，堅持自己的想法',
      '競爭意識強',
      '重視公平，不願占人便宜',
    ],
    positive: [
      '獨立能力強',
      '有原則有底線',
      '能與人平等合作',
      '自尊心強，有骨氣',
    ],
    negative: [
      '過於固執己見',
      '不善於妥協',
      '容易與人競爭',
      '有時過於在意面子',
    ],
    career: [
      '適合獨立工作或創業',
      '適合需要競爭的環境',
      '可以合夥但需平等',
    ],
    inPalace: {
      '年柱': '童年有兄弟姐妹陪伴，或早年獨立',
      '月柱': '職場上有競爭，或與同事關係重要',
      '日柱': '配偶性格獨立，婚姻需平等相處',
      '時柱': '晚年有朋友相伴，子女獨立',
    },
  },

  '劫財': {
    name: '劫財',
    alias: ['劫', '敗財'],
    represent: [
      '異性兄弟姐妹',
      '競爭對手、搶奪者',
      '錢財流失',
      '衝動、爭奪',
    ],
    character: [
      '好勝心強，不服輸',
      '敢於冒險，有賭性',
      '慷慨大方，但有時過度',
      '行動派，想到就做',
    ],
    positive: [
      '有衝勁和魄力',
      '敢於挑戰',
      '人緣好，朋友多',
      '不計較得失（有時）',
    ],
    negative: [
      '容易破財',
      '衝動行事',
      '可能因朋友損失',
      '爭強好勝惹麻煩',
    ],
    career: [
      '適合競爭激烈的行業',
      '不適合穩定保守的工作',
      '需要注意理財',
    ],
    inPalace: {
      '年柱': '童年家境有波動，或與兄弟姐妹競爭',
      '月柱': '職場競爭激烈，防小人',
      '日柱': '感情有競爭者，婚姻需經營',
      '時柱': '晚年財運有波動，注意投資',
    },
  },

  '食神': {
    name: '食神',
    alias: ['食', '壽星'],
    represent: [
      '女命代表女兒',
      '才華、創意、表達',
      '口福、享受',
      '學生、晚輩',
    ],
    character: [
      '樂觀開朗，懂得享受生活',
      '有才華，善於表達',
      '心態平和，不計較',
      '有藝術天分',
    ],
    positive: [
      '口才好，善於溝通',
      '有創造力',
      '人緣好，討人喜歡',
      '懂得生活情趣',
    ],
    negative: [
      '可能過於安逸',
      '有時缺乏上進心',
      '容易滿足現狀',
      '可能飲食過度',
    ],
    career: [
      '適合：餐飲、藝術、教育、娛樂',
      '適合需要創意和表達的工作',
      '福報好，工作較順利',
    ],
    inPalace: {
      '年柱': '童年衣食無憂，家境不錯',
      '月柱': '工作輕鬆，有口福',
      '日柱': '婚姻和諧，生活有情趣',
      '時柱': '晚年享福，子女孝順',
    },
  },

  '傷官': {
    name: '傷官',
    alias: ['傷', '叛逆星'],
    represent: [
      '女命代表兒子',
      '才華、叛逆、創新',
      '表現欲、藝術',
      '對抗權威',
    ],
    character: [
      '聰明才智高',
      '不服權威，有叛逆性',
      '創意十足，想法獨特',
      '口才犀利，有時太直',
    ],
    positive: [
      '才華洋溢',
      '敢於創新',
      '表達能力強',
      '不怕挑戰權威',
    ],
    negative: [
      '容易得罪人',
      '有時過於自負',
      '對上司不服氣',
      '感情上容易受傷',
    ],
    career: [
      '適合：藝術、創作、律師、自由業',
      '不適合太多規矩的環境',
      '適合發揮創意的工作',
    ],
    inPalace: {
      '年柱': '童年可能與長輩有衝突',
      '月柱': '職場上可能與上司不合',
      '日柱': '感情上容易有波折（尤其女命）',
      '時柱': '晚年有自己的想法，子女有才華',
    },
  },

  '偏財': {
    name: '偏財',
    alias: ['偏', '橫財'],
    represent: [
      '父親',
      '意外之財、投資',
      '異性緣、情人',
      '流動資金',
    ],
    character: [
      '慷慨大方，樂於分享',
      '社交能力強',
      '有商業頭腦',
      '重視享受',
    ],
    positive: [
      '財運好，有偏財運',
      '人脈廣，朋友多',
      '善於投資理財',
      '異性緣佳',
    ],
    negative: [
      '可能揮霍',
      '感情上可能不專一',
      '財來財去',
      '有時投機取巧',
    ],
    career: [
      '適合：投資、貿易、銷售、公關',
      '適合需要人脈的工作',
      '有機會獲得意外收入',
    ],
    inPalace: {
      '年柱': '家境好，或父親有能力',
      '月柱': '工作有偏財運，或靠人脈賺錢',
      '日柱': '配偶帶財，或婚後財運好',
      '時柱': '晚年財運好，投資有收穫',
    },
  },

  '正財': {
    name: '正財',
    alias: ['財', '妻財'],
    represent: [
      '男命代表妻子',
      '正當收入、薪資',
      '穩定資產',
      '務實、節儉',
    ],
    character: [
      '務實穩重',
      '理財能力強',
      '珍惜所有',
      '有責任感',
    ],
    positive: [
      '財運穩定',
      '善於儲蓄',
      '重視家庭',
      '對感情專一',
    ],
    negative: [
      '可能過於節儉',
      '有時太過保守',
      '可能為錢操心',
      '缺乏冒險精神',
    ],
    career: [
      '適合：金融、會計、行政、穩定企業',
      '適合有固定收入的工作',
      '不適合高風險投資',
    ],
    inPalace: {
      '年柱': '家境穩定，父母有積蓄',
      '月柱': '工作收入穩定，有儲蓄',
      '日柱': '婚姻穩定，配偶持家',
      '時柱': '晚年有積蓄，生活無憂',
    },
  },

  '七殺': {
    name: '七殺',
    alias: ['殺', '偏官'],
    represent: [
      '女命代表男友、情人',
      '壓力、挑戰、危機',
      '權力、武職',
      '小人、競爭對手',
    ],
    character: [
      '有魄力和膽識',
      '做事果斷',
      '有危機意識',
      '不服輸',
    ],
    positive: [
      '有領導力',
      '能承受壓力',
      '執行力強',
      '有威嚴',
    ],
    negative: [
      '容易樹敵',
      '可能過於強勢',
      '壓力大',
      '性格急躁',
    ],
    career: [
      '適合：軍警、醫生、律師、管理層',
      '適合需要魄力的崗位',
      '能在壓力下成長',
    ],
    inPalace: {
      '年柱': '童年有壓力，或家庭嚴格',
      '月柱': '工作壓力大，但能成長',
      '日柱': '感情有波折，但刺激（女命）',
      '時柱': '晚年仍有挑戰，保持活力',
    },
  },

  '正官': {
    name: '正官',
    alias: ['官', '夫星'],
    represent: [
      '女命代表丈夫',
      '上司、長官',
      '名譽、地位',
      '規矩、法律',
    ],
    character: [
      '正直守規矩',
      '有責任感',
      '重視名譽',
      '循規蹈矩',
    ],
    positive: [
      '品行端正',
      '有管理能力',
      '受人尊重',
      '事業穩定',
    ],
    negative: [
      '可能太過保守',
      '有時過於在意他人看法',
      '壓力內化',
      '不夠靈活',
    ],
    career: [
      '適合：公務員、管理職、教師、法律',
      '適合有制度的環境',
      '有升遷機會',
    ],
    inPalace: {
      '年柱': '家教嚴格，家庭有地位',
      '月柱': '工作穩定，有升遷機會',
      '日柱': '婚姻穩定，丈夫可靠（女命）',
      '時柱': '晚年有名望，受人敬重',
    },
  },

  '偏印': {
    name: '偏印',
    alias: ['梟', '梟神'],
    represent: [
      '繼母、偏房',
      '特殊才能、偏門學問',
      '孤獨、獨立思考',
      '宗教、玄學',
    ],
    character: [
      '思想獨特',
      '喜歡獨處',
      '有藝術或靈性天分',
      '不喜歡熱鬧',
    ],
    positive: [
      '有獨特見解',
      '適合研究',
      '直覺強',
      '不隨波逐流',
    ],
    negative: [
      '容易孤獨',
      '想法有時偏激',
      '不善社交',
      '可能過於悲觀',
    ],
    career: [
      '適合：研究、宗教、玄學、藝術、醫療',
      '適合獨立工作',
      '不適合需要大量社交的工作',
    ],
    inPalace: {
      '年柱': '與長輩關係疏離，或有特殊童年',
      '月柱': '工作較孤獨，或專業特殊',
      '日柱': '婚姻中保持獨立，精神世界豐富',
      '時柱': '晚年清閒，有精神寄託',
    },
  },

  '正印': {
    name: '正印',
    alias: ['印', '母星'],
    represent: [
      '母親',
      '學歷、文憑',
      '貴人、保護',
      '名譽、福報',
    ],
    character: [
      '善良有愛心',
      '喜歡學習',
      '有包容心',
      '重視精神層面',
    ],
    positive: [
      '有貴人運',
      '學習能力強',
      '品德好',
      '有福報',
    ],
    negative: [
      '可能過於依賴',
      '有時不夠積極',
      '容易心軟',
      '可能缺乏行動力',
    ],
    career: [
      '適合：教育、學術、出版、宗教',
      '適合需要學歷的工作',
      '有貴人提攜',
    ],
    inPalace: {
      '年柱': '母親疼愛，童年有福',
      '月柱': '工作有貴人，學歷有幫助',
      '日柱': '婚姻有福，配偶善良',
      '時柱': '晚年有福，受人敬重',
    },
  },
};

/**
 * 獲取十神知識
 */
export function getShiShenKnowledge(shiShen: string): ShiShenKnowledge | null {
  return SHISHEN_KNOWLEDGE[shiShen] || null;
}

/**
 * 生成十神解讀文本
 */
export function generateShiShenText(shiShen: string, pillar: string): string {
  const k = SHISHEN_KNOWLEDGE[shiShen];
  if (!k) return '';

  const pillarMeaning = k.inPalace[pillar] || '';

  return `
【${shiShen}】

代表人事物：
${k.represent.map(r => `• ${r}`).join('\n')}

性格傾向：
${k.character.map(c => `• ${c}`).join('\n')}

正面特質：
${k.positive.map(p => `• ${p}`).join('\n')}

需要注意：
${k.negative.map(n => `• ${n}`).join('\n')}

${pillarMeaning ? `在${pillar}的含義：${pillarMeaning}` : ''}
`.trim();
}
