/**
 * 十天干知識庫
 * 日主特性、性格、適合行業、健康等
 */

export interface TianGanKnowledge {
  gan: string;
  wuxing: string;
  yinYang: '陽' | '陰';
  nature: string;           // 自然象徵
  character: string[];      // 性格特點
  strengths: string[];      // 優點
  weaknesses: string[];     // 缺點
  career: string[];         // 適合行業
  health: string[];         // 健康注意
  relationship: string;     // 感情特質
  advice: string;           // 人生建議
}

export const TIANGAN_KNOWLEDGE: Record<string, TianGanKnowledge> = {
  '甲': {
    gan: '甲',
    wuxing: '木',
    yinYang: '陽',
    nature: '參天大樹、棟樑之木',
    character: [
      '正直剛強，有原則不輕易妥協',
      '心胸開闊，有領導氣質',
      '重視面子，不願低頭認錯',
      '有理想抱負，目標明確',
      '固執己見，不易接受他人意見',
    ],
    strengths: [
      '有擔當、重承諾',
      '正義感強，願意幫助弱者',
      '做事有規劃，有長遠眼光',
      '穩重可靠，值得信賴',
    ],
    weaknesses: [
      '太過固執，缺乏彈性',
      '不善變通，容易錯失機會',
      '過於直接，容易得罪人',
      '愛面子，有時死撐不求助',
    ],
    career: [
      '適合：管理層、公務員、教育、法律、建築、園藝',
      '需要穩定環境和明確目標',
      '不適合太多變動的工作',
    ],
    health: [
      '肝膽系統要注意',
      '容易筋骨痠痛',
      '壓力大時影響睡眠',
      '建議：多戶外運動，保持心情舒暢',
    ],
    relationship: '感情專一但不善表達，需要學習柔軟溝通。對伴侶要求高，但一旦認定會全心付出。',
    advice: '大樹需要深根才能穩固，學會適時彎腰不是軟弱，是智慧。',
  },

  '乙': {
    gan: '乙',
    wuxing: '木',
    yinYang: '陰',
    nature: '花草藤蔓、柔韌之木',
    character: [
      '柔軟有韌性，懂得迂迴',
      '心思細膩，善於察言觀色',
      '適應力強，能屈能伸',
      '外柔內剛，看似軟弱實則堅強',
      '有時優柔寡斷，難以決定',
    ],
    strengths: [
      '善於溝通協調',
      '有藝術天分和審美能力',
      '人緣好，懂得與人相處',
      '韌性強，遇挫折能恢復',
    ],
    weaknesses: [
      '容易依賴他人',
      '決斷力不足',
      '有時過於在意他人看法',
      '可能缺乏主見',
    ],
    career: [
      '適合：藝術、設計、公關、服務業、醫療護理、心理諮商',
      '需要和諧的工作環境',
      '適合輔助或幕後角色',
    ],
    health: [
      '肝臟和神經系統',
      '容易情緒起伏影響健康',
      '皮膚和過敏問題',
      '建議：規律作息，避免過度思慮',
    ],
    relationship: '感情豐富，渴望被愛被呵護。容易為愛付出太多，要學會保護自己。',
    advice: '藤蔓攀附大樹才能向上，但別忘了培養自己的根基。',
  },

  '丙': {
    gan: '丙',
    wuxing: '火',
    yinYang: '陽',
    nature: '太陽之火、光明普照',
    character: [
      '熱情開朗，充滿活力',
      '光明磊落，不喜歡陰暗',
      '慷慨大方，樂於分享',
      '急性子，做事雷厲風行',
      '有時過於直接，不留餘地',
    ],
    strengths: [
      '領導力強，能凝聚人心',
      '正能量滿滿，感染力強',
      '行動力強，說做就做',
      '心胸寬廣，不記仇',
    ],
    weaknesses: [
      '容易衝動，缺乏耐心',
      '過於樂觀，低估困難',
      '有時霸道，不聽勸告',
      '情緒來得快去得也快',
    ],
    career: [
      '適合：娛樂、媒體、銷售、創業、演藝、政治',
      '需要有舞台和觀眾',
      '適合開創性工作',
    ],
    health: [
      '心血管系統',
      '容易上火、發炎',
      '眼睛問題',
      '建議：控制脾氣，適度休息',
    ],
    relationship: '熱情主動，愛得轟轟烈烈。但熱情來得快也可能退得快，需要學習持久經營。',
    advice: '太陽照耀萬物但不求回報，學會付出不計較，反而收穫更多。',
  },

  '丁': {
    gan: '丁',
    wuxing: '火',
    yinYang: '陰',
    nature: '燈燭之火、溫暖細膩',
    character: [
      '溫和細膩，善解人意',
      '內斂含蓄，不張揚',
      '洞察力強，能看穿人心',
      '多愁善感，情緒敏感',
      '有時過於內向，不善表達',
    ],
    strengths: [
      '觀察力敏銳',
      '有藝術天分',
      '善於照顧他人',
      '專注力強，能深入研究',
    ],
    weaknesses: [
      '容易想太多',
      '情緒波動大',
      '有時過於悲觀',
      '容易焦慮',
    ],
    career: [
      '適合：研究、寫作、諮詢、醫療、教育、宗教',
      '適合需要深度思考的工作',
      '不適合太多應酬的場合',
    ],
    health: [
      '心臟和血液循環',
      '神經系統敏感',
      '容易失眠',
      '建議：保持心情平靜，多曬太陽',
    ],
    relationship: '感情內斂但深刻，一旦愛上就全心投入。需要安全感，害怕被拋棄。',
    advice: '燈火雖小但能照亮黑暗，不要小看自己的影響力。',
  },

  '戊': {
    gan: '戊',
    wuxing: '土',
    yinYang: '陽',
    nature: '高山大地、厚重穩固',
    character: [
      '穩重踏實，腳踏實地',
      '包容心強，能容納不同意見',
      '誠信可靠，說到做到',
      '反應較慢，但持久穩定',
      '有時過於保守，不願改變',
    ],
    strengths: [
      '值得信賴',
      '有耐心，能長期堅持',
      '穩定可靠',
      '厚道老實',
    ],
    weaknesses: [
      '反應較慢',
      '過於保守固執',
      '不善表達感情',
      '容易錯過機會',
    ],
    career: [
      '適合：金融、房地產、農業、建築、行政管理',
      '適合需要穩定和信任的行業',
      '不適合高風險投機',
    ],
    health: [
      '脾胃系統',
      '容易發胖',
      '消化問題',
      '建議：規律飲食，適度運動',
    ],
    relationship: '感情穩定專一，是可靠的長期伴侶。但要學習浪漫和表達愛意。',
    advice: '大山不動是因為根基穩固，但也要學會在必要時做出改變。',
  },

  '己': {
    gan: '己',
    wuxing: '土',
    yinYang: '陰',
    nature: '田園之土、滋養萬物',
    character: [
      '謙虛內斂，不愛出風頭',
      '善於照顧他人',
      '務實勤勞，腳踏實地',
      '有時過於自卑',
      '容易委屈自己',
    ],
    strengths: [
      '親和力強',
      '善於服務他人',
      '細心周到',
      '能吃苦耐勞',
    ],
    weaknesses: [
      '容易自卑',
      '過於委曲求全',
      '不敢表達需求',
      '容易被利用',
    ],
    career: [
      '適合：服務業、醫療護理、教育、農業、餐飲',
      '適合幕後支援角色',
      '需要被肯定和認可',
    ],
    health: [
      '脾胃和消化系統',
      '容易營養不均',
      '情緒影響食慾',
      '建議：照顧好自己，不只照顧別人',
    ],
    relationship: '默默付出型，容易犧牲自己。要學會被愛，也值得被愛。',
    advice: '田土滋養萬物，但也要讓自己得到滋養，別忘了愛自己。',
  },

  '庚': {
    gan: '庚',
    wuxing: '金',
    yinYang: '陽',
    nature: '刀劍斧鉞、剛烈銳利',
    character: [
      '果斷剛毅，有魄力',
      '重義氣，講原則',
      '有俠義精神',
      '有時過於霸道',
      '容易得罪人',
    ],
    strengths: [
      '決斷力強',
      '執行力強',
      '不畏困難',
      '正義感強',
    ],
    weaknesses: [
      '過於剛硬',
      '不懂圓融',
      '容易樹敵',
      '情緒容易爆發',
    ],
    career: [
      '適合：軍警、法律、外科醫生、運動員、企業管理',
      '適合需要決斷力的崗位',
      '不適合需要委婉的工作',
    ],
    health: [
      '肺和呼吸系統',
      '皮膚問題',
      '容易受傷（骨骼、筋腱）',
      '建議：學會放鬆，不要太拼',
    ],
    relationship: '愛恨分明，對喜歡的人很好，對討厭的人毫不客氣。需要學習包容。',
    advice: '刀劍需要磨礪才鋒利，但也要懂得收鋒藏銳，以免傷人傷己。',
  },

  '辛': {
    gan: '辛',
    wuxing: '金',
    yinYang: '陰',
    nature: '珠玉首飾、精緻優雅',
    character: [
      '細膩敏感，追求完美',
      '有品味，注重外表',
      '自尊心強，愛面子',
      '有時過於挑剔',
      '容易受傷',
    ],
    strengths: [
      '審美能力強',
      '追求品質',
      '善於表達',
      '有個人魅力',
    ],
    weaknesses: [
      '過於在意外表',
      '容易受傷',
      '有時過於挑剔',
      '情緒敏感',
    ],
    career: [
      '適合：珠寶、時尚、美容、金融、精密工藝',
      '適合需要美感和品味的工作',
      '不適合粗獷的環境',
    ],
    health: [
      '肺和皮膚',
      '呼吸道敏感',
      '容易過敏',
      '建議：注意空氣品質，保養皮膚',
    ],
    relationship: '對愛情有高標準，寧缺毋濫。容易因小事受傷，需要被呵護。',
    advice: '珠玉需要打磨才能發光，人生的磨難是讓你更閃耀的過程。',
  },

  '壬': {
    gan: '壬',
    wuxing: '水',
    yinYang: '陽',
    nature: '大海江河、浩瀚奔放',
    character: [
      '聰明靈活，足智多謀',
      '適應力強，隨機應變',
      '有冒險精神',
      '有時過於圓滑',
      '容易見異思遷',
    ],
    strengths: [
      '智慧過人',
      '口才好，善於溝通',
      '適應力極強',
      '創意豐富',
    ],
    weaknesses: [
      '容易飄忽不定',
      '有時過於投機',
      '缺乏耐心',
      '容易厭倦',
    ],
    career: [
      '適合：貿易、外交、旅遊、媒體、諮詢、航運',
      '適合需要靈活應變的工作',
      '不適合太固定的環境',
    ],
    health: [
      '腎臟和泌尿系統',
      '生殖系統',
      '容易水腫',
      '建議：不要過度操勞，注意保暖',
    ],
    relationship: '愛自由，害怕被束縛。需要找到能給空間又能陪伴的伴侶。',
    advice: '大水能載舟亦能覆舟，學會控制自己的力量，引導而非沖毀。',
  },

  '癸': {
    gan: '癸',
    wuxing: '水',
    yinYang: '陰',
    nature: '雨露溪流、滋潤細膩',
    character: [
      '敏感細膩，直覺強',
      '善於觀察，洞悉人心',
      '有藝術天分',
      '有時過於多疑',
      '容易悲觀',
    ],
    strengths: [
      '直覺敏銳',
      '善於傾聽',
      '有同理心',
      '創造力強',
    ],
    weaknesses: [
      '容易想太多',
      '情緒敏感',
      '有時過於消極',
      '缺乏自信',
    ],
    career: [
      '適合：藝術、心理、宗教、研究、醫療',
      '適合需要感知力的工作',
      '不適合太競爭的環境',
    ],
    health: [
      '腎臟和內分泌',
      '容易疲勞',
      '免疫力問題',
      '建議：充足睡眠，避免過度思慮',
    ],
    relationship: '感情豐富但內斂，需要時間建立信任。一旦信任會全心付出。',
    advice: '雨露雖小卻能滋養萬物，你的溫柔是獨特的力量。',
  },
};

/**
 * 根據日主獲取知識
 */
export function getTianGanKnowledge(gan: string): TianGanKnowledge | null {
  return TIANGAN_KNOWLEDGE[gan] || null;
}

/**
 * 生成日主解讀文本（供 RAG 使用）
 */
export function generateDayMasterText(gan: string): string {
  const k = TIANGAN_KNOWLEDGE[gan];
  if (!k) return '';

  return `
【${k.gan}${k.wuxing}日主】（${k.yinYang}${k.wuxing}）

自然象徵：${k.nature}

性格特點：
${k.character.map(c => `• ${c}`).join('\n')}

優點：
${k.strengths.map(s => `• ${s}`).join('\n')}

需要注意：
${k.weaknesses.map(w => `• ${w}`).join('\n')}

事業方向：
${k.career.map(c => `• ${c}`).join('\n')}

健康提醒：
${k.health.map(h => `• ${h}`).join('\n')}

感情特質：
${k.relationship}

命理師建議：
「${k.advice}」
`.trim();
}
