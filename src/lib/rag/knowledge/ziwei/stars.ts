/**
 * 紫微斗數十四主星知識庫
 */

export interface StarKnowledge {
  name: string;
  group: '北斗' | '南斗' | '中天';
  wuxing: string;
  nature: string;           // 星曜本質
  character: string[];      // 性格特點
  strengths: string[];      // 優點
  weaknesses: string[];     // 缺點
  career: string[];         // 事業傾向
  relationship: string;     // 感情特質
  inMing: string;           // 在命宮
  inCaiBo: string;          // 在財帛
  inGuanLu: string;         // 在官祿
  inFuQi: string;           // 在夫妻
}

export const MAIN_STARS: Record<string, StarKnowledge> = {
  '紫微': {
    name: '紫微',
    group: '北斗',
    wuxing: '土',
    nature: '帝王星、領袖星',
    character: [
      '有領導氣質，天生的王者',
      '自尊心強，重視面子',
      '心胸寬大，有格局',
      '喜歡被尊重和推崇',
      '有時高高在上，不接地氣',
    ],
    strengths: [
      '有威嚴和領導力',
      '能統御全局',
      '心胸開闊',
      '有貴人運',
    ],
    weaknesses: [
      '自視過高',
      '喜歡聽好話',
      '有時獨斷',
      '不善處理瑣事',
    ],
    career: [
      '適合：管理層、政治、大企業領導',
      '需要有舞台和權力',
      '不適合基層或服務性工作',
    ],
    relationship: '對感情有期待，希望伴侶能配得上自己。需要被崇拜和尊重。',
    inMing: '命宮有紫微，一生有貴氣，但需要輔星相助才能發揮。獨坐可能孤獨。',
    inCaiBo: '財帛宮有紫微，財運穩定但需要靠地位獲取，不是勞動致富。',
    inGuanLu: '官祿宮有紫微，事業有成就，適合當領導或公職。',
    inFuQi: '夫妻宮有紫微，配偶有氣質或地位，但可能強勢。',
  },

  '天機': {
    name: '天機',
    group: '南斗',
    wuxing: '木',
    nature: '智慧星、謀略星',
    character: [
      '聰明機智，反應快',
      '善於計劃和分析',
      '心思細膩，想得多',
      '多才多藝',
      '有時想太多，猶豫不決',
    ],
    strengths: [
      '腦筋靈活',
      '善於策劃',
      '學習能力強',
      '適應力強',
    ],
    weaknesses: [
      '想太多而不行動',
      '容易焦慮',
      '有時過於計較',
      '缺乏魄力',
    ],
    career: [
      '適合：企劃、顧問、研究、技術、教育',
      '適合幕僚角色',
      '不適合需要果斷決策的崗位',
    ],
    relationship: '感情上想太多，容易患得患失。需要安全感和確定感。',
    inMing: '命宮有天機，聰明但操勞，一生多變動，需要穩定的輔星。',
    inCaiBo: '財帛宮有天機，財運起伏，靠腦力賺錢，適合投資策略。',
    inGuanLu: '官祿宮有天機，工作靠智慧，適合專業或顧問。',
    inFuQi: '夫妻宮有天機，配偶聰明但多慮，感情需要溝通。',
  },

  '太陽': {
    name: '太陽',
    group: '中天',
    wuxing: '火',
    nature: '光明星、貴人星',
    character: [
      '光明磊落，熱情大方',
      '樂於助人，有正義感',
      '積極主動',
      '男命代表自己，女命代表丈夫和父親',
      '有時過於直接',
    ],
    strengths: [
      '正能量，受人喜愛',
      '有領導力',
      '慷慨大方',
      '貴人運好',
    ],
    weaknesses: [
      '容易操勞',
      '付出不一定有回報',
      '有時太過熱心',
      '情緒波動',
    ],
    career: [
      '適合：公共服務、政治、教育、慈善',
      '適合需要曝光的工作',
      '女命可能遇到好丈夫',
    ],
    relationship: '男命熱情主動，女命希望有陽光般的丈夫。',
    inMing: '命宮有太陽，人緣好，有貴人。廟旺時光芒萬丈，落陷時辛苦付出。',
    inCaiBo: '財帛宮有太陽，財運靠人脈和名聲，公開透明。',
    inGuanLu: '官祿宮有太陽，事業有聲望，適合公職或領導。',
    inFuQi: '夫妻宮有太陽，男命可能為家庭付出多，女命丈夫條件好。',
  },

  '武曲': {
    name: '武曲',
    group: '北斗',
    wuxing: '金',
    nature: '財星、剛毅星',
    character: [
      '剛毅果斷，說一不二',
      '務實重利',
      '行動力強',
      '不善言辭',
      '有時過於剛硬',
    ],
    strengths: [
      '財運好',
      '執行力強',
      '有魄力',
      '重信用',
    ],
    weaknesses: [
      '不善交際',
      '過於剛直',
      '不會說軟話',
      '感情上較遲鈍',
    ],
    career: [
      '適合：金融、軍警、工程、技術',
      '適合需要專業技能的工作',
      '靠實力賺錢',
    ],
    relationship: '感情上不善表達，但很專一。需要學習柔軟。',
    inMing: '命宮有武曲，財運好但性格剛直，需要柔性星來調和。',
    inCaiBo: '財帛宮有武曲，正財運極佳，靠努力賺錢。',
    inGuanLu: '官祿宮有武曲，事業有成，適合技術或財務相關。',
    inFuQi: '夫妻宮有武曲，配偶務實能幹，但感情較平淡。',
  },

  '天同': {
    name: '天同',
    group: '南斗',
    wuxing: '水',
    nature: '福星、享樂星',
    character: [
      '溫和善良，人緣好',
      '愛享受，追求舒適',
      '樂觀隨和',
      '有時缺乏上進心',
      '不喜歡壓力',
    ],
    strengths: [
      '人緣極佳',
      '生活有福',
      '心態好',
      '會享受生活',
    ],
    weaknesses: [
      '容易安於現狀',
      '缺乏鬥志',
      '有時太懶',
      '逃避壓力',
    ],
    career: [
      '適合：服務業、娛樂、餐飲、藝術',
      '適合輕鬆的工作環境',
      '不適合高壓力的工作',
    ],
    relationship: '感情上溫和體貼，但可能過於隨和缺乏主見。',
    inMing: '命宮有天同，一生有福，但要注意不要太安逸。',
    inCaiBo: '財帛宮有天同，財運平穩，花錢在享受上。',
    inGuanLu: '官祿宮有天同，工作輕鬆，但升遷較慢。',
    inFuQi: '夫妻宮有天同，婚姻和諧，配偶溫和。',
  },

  '廉貞': {
    name: '廉貞',
    group: '北斗',
    wuxing: '火',
    nature: '次桃花星、囚星',
    character: [
      '外冷內熱，有魅力',
      '好勝心強',
      '聰明能幹',
      '感情複雜',
      '有時極端',
    ],
    strengths: [
      '工作能力強',
      '有吸引力',
      '堅強不屈',
      '追求完美',
    ],
    weaknesses: [
      '情緒波動大',
      '感情上容易出問題',
      '有時過於執著',
      '可能惹官非',
    ],
    career: [
      '適合：政治、法律、公關、藝術',
      '適合需要魅力的工作',
      '注意職場人際',
    ],
    relationship: '感情豐富但複雜，容易有桃花但也容易受傷。',
    inMing: '命宮有廉貞，有魅力但命運多波折，需要穩重星來化解。',
    inCaiBo: '財帛宮有廉貞，財運起伏，可能因感情影響財運。',
    inGuanLu: '官祿宮有廉貞，工作有成就但壓力大，注意官非。',
    inFuQi: '夫妻宮有廉貞，感情濃烈但波折多，需要經營。',
  },

  '天府': {
    name: '天府',
    group: '南斗',
    wuxing: '土',
    nature: '財庫星、穩定星',
    character: [
      '穩重大方，有氣度',
      '善於理財',
      '重視安全感',
      '有領導力但較保守',
      '有時過於保守',
    ],
    strengths: [
      '財運穩定',
      '有包容心',
      '值得信賴',
      '有福報',
    ],
    weaknesses: [
      '過於保守',
      '不願冒險',
      '有時固執',
      '缺乏創新',
    ],
    career: [
      '適合：金融、行政、管理、不動產',
      '適合穩定的大企業',
      '善於守財',
    ],
    relationship: '感情穩定，重視家庭，是可靠的伴侶。',
    inMing: '命宮有天府，一生穩定有福，財運好。',
    inCaiBo: '財帛宮有天府，財運極佳，善於儲蓄。',
    inGuanLu: '官祿宮有天府，事業穩定，適合管理職。',
    inFuQi: '夫妻宮有天府，婚姻穩定，配偶可靠。',
  },

  '太陰': {
    name: '太陰',
    group: '中天',
    wuxing: '水',
    nature: '財星、田宅星',
    character: [
      '溫柔細膩，感情豐富',
      '有藝術天分',
      '善於理財',
      '男命代表母親和妻子',
      '有時過於敏感',
    ],
    strengths: [
      '財運好（尤其不動產）',
      '有藝術才華',
      '善解人意',
      '有耐心',
    ],
    weaknesses: [
      '情緒敏感',
      '容易想太多',
      '有時過於內向',
      '容易受環境影響',
    ],
    career: [
      '適合：不動產、金融、藝術、夜間工作',
      '適合需要細心的工作',
      '財運與女性或房產相關',
    ],
    relationship: '感情細膩，渴望被呵護，男命可能遇到好妻子。',
    inMing: '命宮有太陰，性格溫和，有財運但情緒敏感。廟旺時財運佳。',
    inCaiBo: '財帛宮有太陰，財運極佳，尤其是不動產。',
    inGuanLu: '官祿宮有太陰，適合與女性、房產、藝術相關的工作。',
    inFuQi: '夫妻宮有太陰，男命妻子賢慧，女命感情細膩。',
  },

  '貪狼': {
    name: '貪狼',
    group: '北斗',
    wuxing: '木',
    nature: '桃花星、才藝星',
    character: [
      '多才多藝，興趣廣泛',
      '有魅力，異性緣好',
      '欲望強，追求多',
      '善於交際',
      '有時貪多嚼不爛',
    ],
    strengths: [
      '才華橫溢',
      '魅力十足',
      '適應力強',
      '有創意',
    ],
    weaknesses: [
      '欲望太多',
      '不專一',
      '可能沉迷享樂',
      '容易分心',
    ],
    career: [
      '適合：娛樂、藝術、銷售、公關',
      '適合需要魅力和才藝的工作',
      '需要專注才能成功',
    ],
    relationship: '感情豐富，桃花多，但需要學習專一。',
    inMing: '命宮有貪狼，才藝多但需要專注，桃花旺但要收斂。',
    inCaiBo: '財帛宮有貪狼，財運靠才藝或人脈，有偏財運。',
    inGuanLu: '官祿宮有貪狼，事業多變化，適合創意產業。',
    inFuQi: '夫妻宮有貪狼，感情多彩多姿，但要注意專一。',
  },

  '巨門': {
    name: '巨門',
    group: '北斗',
    wuxing: '水',
    nature: '是非星、口舌星',
    character: [
      '口才好，善於分析',
      '有探究精神',
      '喜歡辯論',
      '有時過於直接',
      '容易招惹是非',
    ],
    strengths: [
      '分析能力強',
      '口才了得',
      '善於發現問題',
      '有正義感',
    ],
    weaknesses: [
      '容易得罪人',
      '口舌是非多',
      '有時過於挑剔',
      '人際關係需經營',
    ],
    career: [
      '適合：律師、教師、分析師、記者、評論',
      '適合靠口才吃飯的工作',
      '需要注意人際關係',
    ],
    relationship: '感情上容易因言語起衝突，需要學習溝通的藝術。',
    inMing: '命宮有巨門，口才好但是非多，需要修口德。化祿化權時反而成才。',
    inCaiBo: '財帛宮有巨門，財運起伏，靠口才或專業賺錢。',
    inGuanLu: '官祿宮有巨門，事業有波折，適合專業領域。',
    inFuQi: '夫妻宮有巨門，婚姻溝通重要，避免爭吵。',
  },

  '天相': {
    name: '天相',
    group: '南斗',
    wuxing: '水',
    nature: '印星、輔佐星',
    character: [
      '正直可靠，重視原則',
      '善於輔佐',
      '有服務精神',
      '循規蹈矩',
      '有時缺乏主見',
    ],
    strengths: [
      '值得信賴',
      '有責任感',
      '善於輔助他人',
      '有貴人運',
    ],
    weaknesses: [
      '缺乏獨立性',
      '過於保守',
      '容易依附他人',
      '決斷力不足',
    ],
    career: [
      '適合：秘書、幕僚、公職、服務業',
      '適合輔助性角色',
      '有長官提拔',
    ],
    relationship: '感情上忠誠可靠，但可能缺乏激情。',
    inMing: '命宮有天相，一生有貴人，但需要依附強者。',
    inCaiBo: '財帛宮有天相，財運穩定，靠服務或公職。',
    inGuanLu: '官祿宮有天相，事業靠貴人，適合公職。',
    inFuQi: '夫妻宮有天相，配偶正直可靠。',
  },

  '天梁': {
    name: '天梁',
    group: '南斗',
    wuxing: '土',
    nature: '蔭星、長壽星',
    character: [
      '穩重正直，有長者風範',
      '樂於助人，有愛心',
      '喜歡教導他人',
      '有時過於嘮叨',
      '晚運佳',
    ],
    strengths: [
      '有福報和蔭庇',
      '逢凶化吉',
      '有智慧',
      '適合長輩角色',
    ],
    weaknesses: [
      '有時愛說教',
      '過於保守',
      '可能孤獨',
      '年輕時運勢較平',
    ],
    career: [
      '適合：教育、宗教、醫療、社工',
      '適合幫助他人的工作',
      '晚年有成就',
    ],
    relationship: '感情上較晚熟，但能找到知心伴侶。',
    inMing: '命宮有天梁，有福報能化解災難，適合晚發。',
    inCaiBo: '財帛宮有天梁，財運穩定，不求大富但無憂。',
    inGuanLu: '官祿宮有天梁，事業有貴人，適合公職或教育。',
    inFuQi: '夫妻宮有天梁，配偶穩重，婚姻有蔭。',
  },

  '七殺': {
    name: '七殺',
    group: '南斗',
    wuxing: '金',
    nature: '將星、衝刺星',
    character: [
      '剛強勇猛，有魄力',
      '做事果斷',
      '不怕困難',
      '獨立性強',
      '有時過於衝動',
    ],
    strengths: [
      '執行力強',
      '有領導力',
      '不畏艱難',
      '適合開創',
    ],
    weaknesses: [
      '過於剛硬',
      '容易樹敵',
      '有時孤獨',
      '情緒起伏',
    ],
    career: [
      '適合：軍警、運動、創業、管理',
      '適合需要魄力的工作',
      '要學會團隊合作',
    ],
    relationship: '感情上不善表達，但很專一。需要包容的伴侶。',
    inMing: '命宮有七殺，一生有衝勁但波折多，需要輔星化解。',
    inCaiBo: '財帛宮有七殺，財運靠拼搏，起伏較大。',
    inGuanLu: '官祿宮有七殺，事業有成就但壓力大。',
    inFuQi: '夫妻宮有七殺，配偶強勢，婚姻需磨合。',
  },

  '破軍': {
    name: '破軍',
    group: '北斗',
    wuxing: '水',
    nature: '開創星、變動星',
    character: [
      '勇於開創，不怕打破',
      '喜歡變化',
      '有衝勁',
      '不按常理出牌',
      '有時過於衝動',
    ],
    strengths: [
      '開創能力強',
      '敢於改變',
      '不怕失敗',
      '有革新精神',
    ],
    weaknesses: [
      '容易破壞',
      '不穩定',
      '有時魯莽',
      '難以守成',
    ],
    career: [
      '適合：開發、創業、改革、藝術',
      '適合需要創新的工作',
      '不適合穩定的環境',
    ],
    relationship: '感情上多變化，難以安定，但真心時很投入。',
    inMing: '命宮有破軍，一生多變化，適合開創不適合守成。',
    inCaiBo: '財帛宮有破軍，財運起伏大，有暴起暴落。',
    inGuanLu: '官祿宮有破軍，事業多變動，適合創新領域。',
    inFuQi: '夫妻宮有破軍，感情波折多，需要磨合。',
  },
};

/**
 * 獲取主星知識
 */
export function getStarKnowledge(starName: string): StarKnowledge | null {
  return MAIN_STARS[starName] || null;
}

/**
 * 生成主星在特定宮位的解讀
 */
export function generateStarInPalaceText(starName: string, palace: string): string {
  const star = MAIN_STARS[starName];
  if (!star) return '';

  let palaceMeaning = '';
  switch (palace) {
    case '命宮': palaceMeaning = star.inMing; break;
    case '財帛': case '財帛宮': palaceMeaning = star.inCaiBo; break;
    case '官祿': case '官祿宮': palaceMeaning = star.inGuanLu; break;
    case '夫妻': case '夫妻宮': palaceMeaning = star.inFuQi; break;
  }

  return `
【${starName}星】（${star.group}・${star.wuxing}）

本質：${star.nature}

性格特點：
${star.character.map(c => `• ${c}`).join('\n')}

優點：
${star.strengths.map(s => `• ${s}`).join('\n')}

需要注意：
${star.weaknesses.map(w => `• ${w}`).join('\n')}

事業傾向：
${star.career.map(c => `• ${c}`).join('\n')}

感情特質：
${star.relationship}

${palaceMeaning ? `\n【${palace}解讀】\n${palaceMeaning}` : ''}
`.trim();
}
